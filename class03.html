
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Class03 &#8212; Database and Data Management</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/nameko.css" />
    <link rel="stylesheet" type="text/css" href="_static/jupyter-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="_static/thebelab.css" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/thebelab-helper.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="https://unpkg.com/@jupyter-widgets/html-manager@^0.20.0/dist/embed-amd.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Class04" href="class04.html" />
    <link rel="prev" title="Class02" href="class02.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="class04.html" title="Class04"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="class02.html" title="Class02"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Database and Data Management</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Class03</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="class03">
<h1>Class03<a class="headerlink" href="#class03" title="Permalink to this headline">¶</a></h1>
<section id="compustat-north-america-overview">
<h2>Compustat North America overview<a class="headerlink" href="#compustat-north-america-overview" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Data: accounting and price data</p></li>
<li><p>Coverage: US and Canada</p></li>
<li><p>Time period: 1950 - present (Fundamentals Annual)</p></li>
<li><p>Frequency</p>
<ul>
<li><p>Accounting data: yearly and quarterly</p></li>
<li><p>Price data: daily and monthly</p></li>
</ul>
</li>
<li><p>Dataset structure</p>
<ul>
<li><p>Fundamentals Annual</p></li>
<li><p>Fundamentals Quarterly</p></li>
<li><p>Security Daily</p></li>
<li><p>Security Monthly</p></li>
</ul>
</li>
</ul>
<section id="web-access">
<h3>Web access<a class="headerlink" href="#web-access" title="Permalink to this headline">¶</a></h3>
<p>Downlaod data from Compustat North America via WRDS web access.</p>
<ul class="simple">
<li><p>Dataset: Compustat North Ameria - Fundamentals Annual</p></li>
<li><p>Time period: Jan 2000 to Dec 2020</p></li>
<li><p>Search the entire database</p></li>
<li><p>Screening variables</p>
<ul>
<li><p>Consolidation Level: <strong>C</strong></p></li>
<li><p>Industry Format: <strong>INDL</strong></p></li>
<li><p>Data Format: <strong>STD</strong></p></li>
<li><p>Population Source: <strong>D</strong></p></li>
<li><p>Currency: <strong>USD</strong></p></li>
<li><p>Company Status: <strong>Active (A)</strong> and <strong>Inactive (I)</strong></p></li>
</ul>
</li>
<li><p>Variables</p>
<ul>
<li><p>gvkey</p></li>
<li><p>cusip</p></li>
<li><p>exchg</p></li>
<li><p>sic</p></li>
<li><p>fyear</p></li>
<li><p>at</p></li>
<li><p>seq</p></li>
<li><p>ebit</p></li>
</ul>
</li>
<li><p>Output format</p>
<ul>
<li><p>Tab-delimited text</p></li>
<li><p>Uncompressed</p></li>
<li><p>Date format: YYMMDDn8</p></li>
</ul>
</li>
</ul>
</section>
<section id="industry-format">
<h3>Industry Format<a class="headerlink" href="#industry-format" title="Permalink to this headline">¶</a></h3>
<dl>
<dt><dbvar>INDFMT</dbvar>
<dd>FS - financial services (includes banks, insurance companies, broker/dealers, real estate and other financial services)
<dd>INDL - other than financial services
</dl>
<table class="colwidths-auto docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>gvkey</p></th>
<th class="head"><p>fyear</p></th>
<th class="head"><p>indfmt</p></th>
<th class="head"><p>at</p></th>
<th class="head"><p>capr1</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>007647</p></td>
<td><p>2020</p></td>
<td><p>FS</p></td>
<td><p>2819627.0</p></td>
<td><p>13.5</p></td>
</tr>
<tr class="row-odd"><td><p>007647</p></td>
<td><p>2020</p></td>
<td><p>INDL</p></td>
<td><p>2819627.0</p></td>
<td><p></p></td>
</tr>
</tbody>
</table>
</section>
<section id="identifiers">
<h3>Identifiers<a class="headerlink" href="#identifiers" title="Permalink to this headline">¶</a></h3>
<dl>
<dt><dbvar>GVKEY</dbvar>
<dd>Compustat permanent firm level identifier
<dd>They are permanent and never change
<dt><dbvar>CUSIP</dbvar>
<dd>Current 9-digit <dbvar>CUSIP</dbvar> (security level)
<dd>They can be changed.
<dt><dbvar>CIK</dbvar>
<dd>Central Index Key used for SEC filings
</dl>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p><strong>Leading zeros of GVKEY</strong></p>
<p><strong>GVKEY</strong> is 6-digit character in string fromat. However, <strong>GVKEY</strong> contains numbers only and it will be recoganised as numerical values in some software by default. Therefore, the leading zeros will be dropped. For example, GVKEY 001050 might become 1050. This will cause matching problem if one dataset has 6-digit GVKEY and another one has GVKEY without leading zero.</p>
</div>
</section>
<section id="datadate-vs-fiscal-year">
<h3>Datadate vs fiscal year<a class="headerlink" href="#datadate-vs-fiscal-year" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Datadate is the date of fiscal year end</p></li>
<li><p>Fiscal year (fyear)</p></li>
</ul>
<table class="colwidths-auto docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Calendar Year</p></th>
<th class="head"><p>Fiscal Year-end Month</p></th>
<th class="head"><p>Fiscal Year</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>2019</p></td>
<td><p>January</p></td>
<td><p>2018</p></td>
</tr>
<tr class="row-odd"><td><p>2019</p></td>
<td><p>February</p></td>
<td><p>2018</p></td>
</tr>
<tr class="row-even"><td><p>2019</p></td>
<td><p>March</p></td>
<td><p>2018</p></td>
</tr>
<tr class="row-odd"><td><p>2019</p></td>
<td><p>April</p></td>
<td><p>2018</p></td>
</tr>
<tr class="row-even"><td><p>2019</p></td>
<td><p>May</p></td>
<td><p>2018</p></td>
</tr>
<tr class="row-odd"><td><p>2019</p></td>
<td><p>June</p></td>
<td><p>2019</p></td>
</tr>
<tr class="row-even"><td><p>2019</p></td>
<td><p>July</p></td>
<td><p>2019</p></td>
</tr>
<tr class="row-odd"><td><p>2019</p></td>
<td><p>August</p></td>
<td><p>2019</p></td>
</tr>
<tr class="row-even"><td><p>2019</p></td>
<td><p>September</p></td>
<td><p>2019</p></td>
</tr>
<tr class="row-odd"><td><p>2019</p></td>
<td><p>October</p></td>
<td><p>2019</p></td>
</tr>
<tr class="row-even"><td><p>2019</p></td>
<td><p>November</p></td>
<td><p>2019</p></td>
</tr>
<tr class="row-odd"><td><p>2019</p></td>
<td><p>December</p></td>
<td><p>2019</p></td>
</tr>
</tbody>
</table>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>Keep in mind that we do not know the accounting information on <strong>datadate</strong>. The accounting numbers are public avaiable after companies release their financial reports.</p>
</div>
<br>
<div>
<img class="imgshadow" src="https://raw.githubusercontent.com/mk0417/image-lib/master/ff1992.png">
<figcaption class="captionfont">Fama and French. (1992). <i>Journal of Finance</i>.</figcaption>
</div>
<div>
<img class="imgshadow" src="https://raw.githubusercontent.com/mk0417/image-lib/master/sec_deadline1.png">
<figcaption class="captionfont">Source: http://www.sec.gov/about/forms/form10-k.pdf</figcaption>
</div>
<div>
<img class="imgshadow" src="https://raw.githubusercontent.com/mk0417/image-lib/master/sec_deadline2.png">
<figcaption class="captionfont">Source: https://www.investor.gov/introduction-investing/investing-basics/glossary/form-10-k</figcaption>
</div>
</section>
<section id="stock-exchange-code">
<h3>Stock exchange code<a class="headerlink" href="#stock-exchange-code" title="Permalink to this headline">¶</a></h3>
<dl>
<lh><dbvar>EXCHG</dbvar></lh>
<dt><varvalue>11</varvalue><dd>NYSE
<dt><varvalue>12</varvalue><dd>AMEX
<dt><varvalue>14</varvalue><dd>NASDAQ
<dt><varvalue>0</varvalue><dd>Subsidiary/Private
<dt><varvalue>19</varvalue><dd>OTC
</dl>
<p><a class="weblink" href="https://wrds-www.wharton.upenn.edu/documents/1647/Exchange_Codes_by_Code.pdf" target="_blank">See other stock exchange codes here</a></p>
</section>
</section>
<section id="python">
<h2>Python<a class="headerlink" href="#python" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Import packages</p></li>
</ul>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
</div>
</div>
<ul class="simple">
<li><p>Import Compustat North America raw data</p></li>
</ul>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;https://www.dropbox.com/s/qro99n7ngq0aztr/funda_raw.txt?dl=1&#39;</span>
<span class="n">funda_raw</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\t</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">low_memory</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="c1"># View first 5 rows and first 5 columns</span>
<span class="n">funda_raw</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:</span><span class="mi">5</span><span class="p">,</span> <span class="p">:</span><span class="mi">5</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>gvkey</th>
      <th>datadate</th>
      <th>fyear</th>
      <th>indfmt</th>
      <th>consol</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1004</td>
      <td>20000531</td>
      <td>1999</td>
      <td>INDL</td>
      <td>C</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1004</td>
      <td>20010531</td>
      <td>2000</td>
      <td>INDL</td>
      <td>C</td>
    </tr>
    <tr>
      <th>2</th>
      <td>1004</td>
      <td>20020531</td>
      <td>2001</td>
      <td>INDL</td>
      <td>C</td>
    </tr>
    <tr>
      <th>3</th>
      <td>1004</td>
      <td>20030531</td>
      <td>2002</td>
      <td>INDL</td>
      <td>C</td>
    </tr>
    <tr>
      <th>4</th>
      <td>1004</td>
      <td>20040531</td>
      <td>2003</td>
      <td>INDL</td>
      <td>C</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Data types</span>
<span class="n">funda_raw</span><span class="o">.</span><span class="n">info</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-none notranslate"><div class="highlight"><pre><span></span>&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
RangeIndex: 199080 entries, 0 to 199079
Data columns (total 16 columns):
 #   Column    Non-Null Count   Dtype  
---  ------    --------------   -----  
 0   gvkey     199080 non-null  int64  
 1   datadate  199080 non-null  int64  
 2   fyear     199080 non-null  int64  
 3   indfmt    199080 non-null  object 
 4   consol    199080 non-null  object 
 5   popsrc    199080 non-null  object 
 6   datafmt   199080 non-null  object 
 7   tic       198983 non-null  object 
 8   cusip     198983 non-null  object 
 9   curcd     199080 non-null  object 
 10  at        161570 non-null  float64
 11  ebit      160025 non-null  float64
 12  seq       161564 non-null  float64
 13  exchg     198983 non-null  float64
 14  costat    199080 non-null  object 
 15  sic       199075 non-null  float64
dtypes: float64(5), int64(3), object(8)
memory usage: 24.3+ MB
</pre></div>
</div>
</div>
</div>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Read the data again with consideration of the data type of gvkey</span>
<span class="n">funda_raw</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\t</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">low_memory</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;gvkey&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">})</span>

<span class="c1"># View first 5 rows and first 5 columns</span>
<span class="n">funda_raw</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:</span><span class="mi">5</span><span class="p">,</span> <span class="p">:</span><span class="mi">5</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>gvkey</th>
      <th>datadate</th>
      <th>fyear</th>
      <th>indfmt</th>
      <th>consol</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>001004</td>
      <td>20000531</td>
      <td>1999</td>
      <td>INDL</td>
      <td>C</td>
    </tr>
    <tr>
      <th>1</th>
      <td>001004</td>
      <td>20010531</td>
      <td>2000</td>
      <td>INDL</td>
      <td>C</td>
    </tr>
    <tr>
      <th>2</th>
      <td>001004</td>
      <td>20020531</td>
      <td>2001</td>
      <td>INDL</td>
      <td>C</td>
    </tr>
    <tr>
      <th>3</th>
      <td>001004</td>
      <td>20030531</td>
      <td>2002</td>
      <td>INDL</td>
      <td>C</td>
    </tr>
    <tr>
      <th>4</th>
      <td>001004</td>
      <td>20040531</td>
      <td>2003</td>
      <td>INDL</td>
      <td>C</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Data types</span>
<span class="n">funda_raw</span><span class="o">.</span><span class="n">info</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-none notranslate"><div class="highlight"><pre><span></span>&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
RangeIndex: 199080 entries, 0 to 199079
Data columns (total 16 columns):
 #   Column    Non-Null Count   Dtype  
---  ------    --------------   -----  
 0   gvkey     199080 non-null  object 
 1   datadate  199080 non-null  int64  
 2   fyear     199080 non-null  int64  
 3   indfmt    199080 non-null  object 
 4   consol    199080 non-null  object 
 5   popsrc    199080 non-null  object 
 6   datafmt   199080 non-null  object 
 7   tic       198983 non-null  object 
 8   cusip     198983 non-null  object 
 9   curcd     199080 non-null  object 
 10  at        161570 non-null  float64
 11  ebit      160025 non-null  float64
 12  seq       161564 non-null  float64
 13  exchg     198983 non-null  float64
 14  costat    199080 non-null  object 
 15  sic       199075 non-null  float64
dtypes: float64(5), int64(2), object(9)
memory usage: 24.3+ MB
</pre></div>
</div>
</div>
</div>
<ul class="simple">
<li><p>Clean dataset</p></li>
</ul>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">funda_raw</span> <span class="o">=</span> <span class="n">funda_raw</span><span class="o">.</span><span class="n">sort_values</span><span class="p">([</span><span class="s1">&#39;gvkey&#39;</span><span class="p">,</span> <span class="s1">&#39;fyear&#39;</span><span class="p">,</span> <span class="s1">&#39;datadate&#39;</span><span class="p">],</span> <span class="n">ignore_index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Number of obs: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">funda_raw</span><span class="p">)</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

<span class="c1"># Keep the most recent one if there are duplicates</span>
<span class="n">funda</span> <span class="o">=</span> <span class="n">funda_raw</span><span class="o">.</span><span class="n">drop_duplicates</span><span class="p">([</span><span class="s1">&#39;gvkey&#39;</span><span class="p">,</span> <span class="s1">&#39;fyear&#39;</span><span class="p">],</span> <span class="n">keep</span><span class="o">=</span><span class="s1">&#39;last&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Number of obs after removing duplicates: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">funda</span><span class="p">)</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

<span class="c1"># Keep main stock exchanges</span>
<span class="n">funda</span> <span class="o">=</span> <span class="n">funda</span><span class="p">[</span><span class="n">funda</span><span class="p">[</span><span class="s1">&#39;exchg&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">isin</span><span class="p">([</span><span class="mi">11</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">14</span><span class="p">])]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Number of obs after keeping main stock exchanges: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">funda</span><span class="p">)</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

<span class="c1"># Drop unnecessary variables</span>
<span class="n">drop_vars</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;indfmt&#39;</span><span class="p">,</span> <span class="s1">&#39;consol&#39;</span><span class="p">,</span> <span class="s1">&#39;popsrc&#39;</span><span class="p">,</span> <span class="s1">&#39;datafmt&#39;</span><span class="p">,</span> <span class="s1">&#39;costat&#39;</span><span class="p">,</span> <span class="s1">&#39;curcd&#39;</span><span class="p">]</span>
<span class="n">funda</span> <span class="o">=</span> <span class="n">funda</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="n">drop_vars</span><span class="p">)</span>

<span class="c1"># Drop if total asset and equity are not positive</span>
<span class="n">funda</span> <span class="o">=</span> <span class="n">funda</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s1">&#39;at&gt;0 &amp; seq&gt;0&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Number of obs after requiring positive asset: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">funda</span><span class="p">)</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-none notranslate"><div class="highlight"><pre><span></span>Number of obs: 199080
Number of obs after removing duplicates: 199080
Number of obs after keeping main stock exchanges: 125063
Number of obs after requiring positive asset: 101899
</pre></div>
</div>
</div>
</div>
<p><strong>API reference</strong>: <a class="apilink" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.sort_values.html" target="_blank">pandas.dataframe.sort_values</a></p>
<ul class="simple">
<li><p>Firm-year obs in each stock exchange</p></li>
</ul>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">funda</span><span class="p">[</span><span class="s1">&#39;exchg&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-none notranslate"><div class="highlight"><pre><span></span>14.0    57467
11.0    39778
12.0     4654
Name: exchg, dtype: int64
</pre></div>
</div>
</div>
</div>
<ul class="simple">
<li><p>Seasonality of fiscal year end</p></li>
</ul>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">funda</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">funda</span><span class="p">[</span><span class="s1">&#39;datadate&#39;</span><span class="p">],</span> <span class="nb">format</span><span class="o">=</span><span class="s1">&#39;%Y%m</span><span class="si">%d</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">funda</span><span class="p">[</span><span class="s1">&#39;month&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">funda</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">month</span>
<span class="n">funda</span><span class="p">[</span><span class="s1">&#39;month&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-none notranslate"><div class="highlight"><pre><span></span>12    78281
6      5295
9      5055
3      4175
1      2690
10     1245
4      1088
8       918
5       913
7       900
2       699
11      640
Name: month, dtype: int64
</pre></div>
</div>
</div>
</div>
<ul class="simple">
<li><p>ROA and ROE</p></li>
</ul>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">funda</span><span class="p">[</span><span class="s1">&#39;roa&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">funda</span><span class="p">[</span><span class="s1">&#39;ebit&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="n">funda</span><span class="p">[</span><span class="s1">&#39;at&#39;</span><span class="p">]</span>
<span class="n">funda</span><span class="p">[</span><span class="s1">&#39;roe&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">funda</span><span class="p">[</span><span class="s1">&#39;ebit&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="n">funda</span><span class="p">[</span><span class="s1">&#39;seq&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
</div>
</div>
<ul>
<li><p>Asset growth</p>
<ul class="simple">
<li><p>Generate lagged variables and calculate growth rate</p></li>
</ul>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">funda</span> <span class="o">=</span> <span class="n">funda</span><span class="o">.</span><span class="n">sort_values</span><span class="p">([</span><span class="s1">&#39;gvkey&#39;</span><span class="p">,</span> <span class="s1">&#39;fyear&#39;</span><span class="p">],</span> <span class="n">ignore_index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">funda</span><span class="p">[</span><span class="s1">&#39;lag_at&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">funda</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;gvkey&#39;</span><span class="p">)[</span><span class="s1">&#39;at&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">funda</span><span class="p">[</span><span class="s1">&#39;lag_fyear&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">funda</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;gvkey&#39;</span><span class="p">)[</span><span class="s1">&#39;fyear&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">funda</span><span class="p">[</span><span class="s1">&#39;ag&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">funda</span><span class="p">[</span><span class="s1">&#39;at&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="n">funda</span><span class="p">[</span><span class="s1">&#39;lag_at&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
</div>
</div>
<ul class="simple">
<li><p>Check year gap</p></li>
</ul>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">funda</span><span class="p">[</span><span class="s1">&#39;fyear_diff&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">funda</span><span class="p">[</span><span class="s1">&#39;fyear&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="n">funda</span><span class="p">[</span><span class="s1">&#39;lag_fyear&#39;</span><span class="p">]</span>
<span class="n">funda</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s1">&#39;fyear_diff&gt;1&#39;</span><span class="p">)[[</span><span class="s1">&#39;gvkey&#39;</span><span class="p">,</span> <span class="s1">&#39;fyear&#39;</span><span class="p">,</span> <span class="s1">&#39;lag_fyear&#39;</span><span class="p">,</span> <span class="s1">&#39;fyear_diff&#39;</span><span class="p">,</span> <span class="s1">&#39;ag&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>gvkey</th>
      <th>fyear</th>
      <th>lag_fyear</th>
      <th>fyear_diff</th>
      <th>ag</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>42</th>
      <td>001038</td>
      <td>2001</td>
      <td>1999.0</td>
      <td>2.0</td>
      <td>0.076013</td>
    </tr>
    <tr>
      <th>49</th>
      <td>001045</td>
      <td>2007</td>
      <td>2003.0</td>
      <td>4.0</td>
      <td>-0.025878</td>
    </tr>
    <tr>
      <th>50</th>
      <td>001045</td>
      <td>2014</td>
      <td>2007.0</td>
      <td>7.0</td>
      <td>0.532008</td>
    </tr>
    <tr>
      <th>283</th>
      <td>001161</td>
      <td>2009</td>
      <td>2007.0</td>
      <td>2.0</td>
      <td>-0.214026</td>
    </tr>
    <tr>
      <th>289</th>
      <td>001161</td>
      <td>2016</td>
      <td>2014.0</td>
      <td>2.0</td>
      <td>-0.118397</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<ul class="simple">
<li><p>Deal with gap</p></li>
</ul>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">funda</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">funda</span><span class="p">[</span><span class="s1">&#39;fyear_diff&#39;</span><span class="p">]</span><span class="o">&gt;</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;ag&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
</div>
</div>
</li>
<li><p>Summary statistics</p></li>
</ul>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">round</span><span class="p">(</span><span class="n">funda</span><span class="p">[[</span><span class="s1">&#39;roa&#39;</span><span class="p">,</span> <span class="s1">&#39;roe&#39;</span><span class="p">,</span> <span class="s1">&#39;ag&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">describe</span><span class="p">(),</span> <span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>roa</th>
      <th>roe</th>
      <th>ag</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>100932.000</td>
      <td>100932.000</td>
      <td>90153.000</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>0.012</td>
      <td>0.105</td>
      <td>8.231</td>
    </tr>
    <tr>
      <th>std</th>
      <td>1.601</td>
      <td>62.213</td>
      <td>1456.622</td>
    </tr>
    <tr>
      <th>min</th>
      <td>-44.088</td>
      <td>-16772.000</td>
      <td>-1.000</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>0.001</td>
      <td>0.002</td>
      <td>-0.024</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>0.043</td>
      <td>0.139</td>
      <td>0.060</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>0.096</td>
      <td>0.249</td>
      <td>0.192</td>
    </tr>
    <tr>
      <th>max</th>
      <td>226.310</td>
      <td>7305.250</td>
      <td>409183.500</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<ul class="simple">
<li><p>Deal with outliers</p></li>
</ul>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Winsorising at 1% and 99% percentile</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;roa&#39;</span><span class="p">,</span> <span class="s1">&#39;roe&#39;</span><span class="p">,</span> <span class="s1">&#39;ag&#39;</span><span class="p">]:</span>
    <span class="n">funda</span><span class="p">[</span><span class="s1">&#39;p1&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">funda</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;fyear&#39;</span><span class="p">)[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">quantile</span><span class="p">(</span><span class="mf">0.01</span><span class="p">))</span>
    <span class="n">funda</span><span class="p">[</span><span class="s1">&#39;p99&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">funda</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;fyear&#39;</span><span class="p">)[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">quantile</span><span class="p">(</span><span class="mf">0.99</span><span class="p">))</span>
    <span class="n">funda</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">funda</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">&lt;</span><span class="n">funda</span><span class="p">[</span><span class="s1">&#39;p1&#39;</span><span class="p">],</span> <span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">funda</span><span class="p">[</span><span class="s1">&#39;p1&#39;</span><span class="p">]</span>
    <span class="n">funda</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">funda</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">&gt;</span><span class="n">funda</span><span class="p">[</span><span class="s1">&#39;p99&#39;</span><span class="p">],</span> <span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">funda</span><span class="p">[</span><span class="s1">&#39;p99&#39;</span><span class="p">]</span>
    <span class="n">funda</span> <span class="o">=</span> <span class="n">funda</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;p1&#39;</span><span class="p">,</span> <span class="s1">&#39;p99&#39;</span><span class="p">])</span>

<span class="nb">round</span><span class="p">(</span><span class="n">funda</span><span class="p">[[</span><span class="s1">&#39;roa&#39;</span><span class="p">,</span> <span class="s1">&#39;roe&#39;</span><span class="p">,</span> <span class="s1">&#39;ag&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">describe</span><span class="p">(),</span> <span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>roa</th>
      <th>roe</th>
      <th>ag</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>100932.000</td>
      <td>100932.000</td>
      <td>90153.000</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>-0.002</td>
      <td>0.048</td>
      <td>0.189</td>
    </tr>
    <tr>
      <th>std</th>
      <td>0.230</td>
      <td>0.652</td>
      <td>0.608</td>
    </tr>
    <tr>
      <th>min</th>
      <td>-1.645</td>
      <td>-6.951</td>
      <td>-0.616</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>0.001</td>
      <td>0.002</td>
      <td>-0.024</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>0.043</td>
      <td>0.139</td>
      <td>0.060</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>0.096</td>
      <td>0.249</td>
      <td>0.192</td>
    </tr>
    <tr>
      <th>max</th>
      <td>0.432</td>
      <td>2.902</td>
      <td>10.965</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</section>
<section id="stata">
<h2>Stata<a class="headerlink" href="#stata" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Import data from a url</p></li>
</ul>
<div class="highlight-stata notranslate"><div class="highlight"><pre><span></span><span class="k">local</span> data_url <span class="s">&quot;https://www.dropbox.com/s/qro99n7ngq0aztr/funda_raw.txt?dl=1&quot;</span>
import delimited <span class="s">&quot;</span><span class="nv">`data_url&#39;</span><span class="s">&quot;</span>,<span class="k"> clear</span>
</pre></div>
</div>
<ul class="simple">
<li><p>List first five observations</p></li>
</ul>
<div class="highlight-stata notranslate"><div class="highlight"><pre><span></span><span class="k">l</span> gvkey datadate at seq ebit<span class="k"> in</span> <span class="m">1</span><span class="o">/</span><span class="m">5</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Data types</p></li>
</ul>
<div class="highlight-stata notranslate"><div class="highlight"><pre><span></span><span class="k">describe</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Specify data type when importing data</p></li>
</ul>
<div class="highlight-stata notranslate"><div class="highlight"><pre><span></span><span class="k">local</span> data_url <span class="s">&quot;https://www.dropbox.com/s/qro99n7ngq0aztr/funda_raw.txt?dl=1&quot;</span>
import delimited <span class="s">&quot;</span><span class="nv">`data_url&#39;</span><span class="s">&quot;</span>, stringcols(<span class="m">1</span>)<span class="k"> clear</span>

<span class="k">describe</span>

<span class="k">l</span> gvkey datadate at seq ebit<span class="k"> in</span> <span class="m">1</span><span class="o">/</span><span class="m">5</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Keep the most recent one if there are duplicates</p></li>
</ul>
<div class="highlight-stata notranslate"><div class="highlight"><pre><span></span><span class="k">sort</span> gvkey fyear datadate

<span class="k">by</span> gvkey fyear:<span class="k"> gen</span> id = _n<span class="k"></span>
<span class="k">by</span> gvkey fyear:<span class="k"> gen n</span> = _N

<span class="k">keep if</span> id <span class="o">==</span><span class="k"> n</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Keep main stock exchanges</p></li>
</ul>
<div class="highlight-stata notranslate"><div class="highlight"><pre><span></span><span class="k">keep if</span> exchg<span class="o">==</span><span class="m">11</span> | exchg<span class="o">==</span><span class="m">12</span> | exchg<span class="o">==</span><span class="m">14</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Drop unnecessary variables</p></li>
</ul>
<div class="highlight-stata notranslate"><div class="highlight"><pre><span></span><span class="k">drop</span> indfmt consol popsrc datafmt costat curcd
</pre></div>
</div>
<ul class="simple">
<li><p>Drop if total asset and equity are not positive</p></li>
</ul>
<div class="highlight-stata notranslate"><div class="highlight"><pre><span></span><span class="c1">// Pay attention:</span>
<span class="c1">//  missing value (.) is larger than any other values</span>
<span class="c1">//  at&gt;0 does not remove missing values</span>
<span class="c1">//  seq&gt;0 does not remove missing values</span>
<span class="c1">//  This is different from Python</span>

<span class="k">keep if</span> at<span class="o">&gt;</span><span class="m">0</span> <span class="o">&amp;</span> seq<span class="o">&gt;</span><span class="m">0</span> <span class="o">&amp;</span> at<span class="o">!=</span>. <span class="o">&amp;</span> seq<span class="o">!=</span>.
</pre></div>
</div>
<ul class="simple">
<li><p>Firm-year observations in each stock exchange</p></li>
</ul>
<div class="highlight-stata notranslate"><div class="highlight"><pre><span></span><span class="k">tab</span> exchg
</pre></div>
</div>
<ul class="simple">
<li><p>Seasonality of fiscal year end</p></li>
</ul>
<div class="highlight-stata notranslate"><div class="highlight"><pre><span></span><span class="k">tostring</span> datadate,<span class="k"> replace</span>
<span class="k">gen</span> date = <span class="nf">date</span>(datadate, <span class="s">&quot;YMD&quot;</span>)<span class="k"></span>
<span class="k">format</span> date <span class="nx">%td</span>

<span class="k">gen</span> month = <span class="nf">month</span>(date)

<span class="k">tab</span> month
</pre></div>
</div>
<ul class="simple">
<li><p>ROA and ROE</p></li>
</ul>
<div class="highlight-stata notranslate"><div class="highlight"><pre><span></span><span class="k">gen</span> roa = ebit <span class="o">/</span> at

<span class="k">gen</span> roe = ebit <span class="o">/</span> seq
</pre></div>
</div>
<ul class="simple">
<li><p>Asset growth</p></li>
</ul>
<div class="highlight-stata notranslate"><div class="highlight"><pre><span></span><span class="k">sort</span> gvkey fyear

<span class="c1">// Generate lagged variables and calculate growth rate</span>
<span class="k">by</span> gvkey:<span class="k"> gen</span> lag_at = at[_n<span class="m">-1</span>]<span class="k"></span>
<span class="k">by</span> gvkey:<span class="k"> gen</span> lag_fyear = fyear[_n<span class="m">-1</span>]<span class="k"></span>
<span class="k">gen</span> ag = at <span class="o">/</span> lag_at <span class="o">-</span> <span class="m">1</span>

<span class="c1">// Check year gap</span>
<span class="k">gen</span> fyear_diff = fyear <span class="o">-</span> lag_fyear

<span class="c1">// Deal with gap</span>
<span class="k">replace</span> ag = .<span class="k"> if</span> fyear_diff<span class="o">&gt;</span><span class="m">1</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Summary statistics</p></li>
</ul>
<div class="highlight-stata notranslate"><div class="highlight"><pre><span></span><span class="k">summ</span> roa roe ag
</pre></div>
</div>
<ul class="simple">
<li><p>Deal with outliers</p></li>
</ul>
<div class="highlight-stata notranslate"><div class="highlight"><pre><span></span><span class="k">foreach</span> i of<span class="k"> varlist</span> roa roe ag {
<span class="k">	bysort</span> fyear:<span class="k"> egen</span> p1 =<span class="k"> pctile</span>(<span class="nv">`i&#39;</span>), p(<span class="m">1</span>)
<span class="k">	bysort</span> fyear:<span class="k"> egen</span> p99 =<span class="k"> pctile</span>(<span class="nv">`i&#39;</span>), p(<span class="m">99</span>)
<span class="k">	replace</span> <span class="nv">`i&#39;</span> = p1<span class="k"> if</span> <span class="nv">`i&#39;</span> <span class="o">&lt;</span> p1
<span class="k">	replace</span> <span class="nv">`i&#39;</span> = p99<span class="k"> if</span> <span class="nv">`i&#39;</span> <span class="o">&gt;</span> p99
<span class="k">	drop</span> p1 p99
}

<span class="k">sort</span> gvkey fyear

<span class="k">summ</span> roa roe ag
</pre></div>
</div>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">Class03</a><ul>
<li><a class="reference internal" href="#compustat-north-america-overview">Compustat North America overview</a><ul>
<li><a class="reference internal" href="#web-access">Web access</a></li>
<li><a class="reference internal" href="#industry-format">Industry Format</a></li>
<li><a class="reference internal" href="#identifiers">Identifiers</a></li>
<li><a class="reference internal" href="#datadate-vs-fiscal-year">Datadate vs fiscal year</a></li>
<li><a class="reference internal" href="#stock-exchange-code">Stock exchange code</a></li>
</ul>
</li>
<li><a class="reference internal" href="#python">Python</a></li>
<li><a class="reference internal" href="#stata">Stata</a></li>
</ul>
</li>
</ul>

  </div><h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation index</a><ul>
      <li>Previous: <a href="class02.html" title="previous chapter">Class02</a></li>
      <li>Next: <a href="class04.html" title="next chapter">Class04</a></li>
  </ul></li>
</ul>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/class03.md.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="class04.html" title="Class04"
             >next</a> |</li>
        <li class="right" >
          <a href="class02.html" title="Class02"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Database and Data Management</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Class03</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
      <p>
        &copy; Copyright 2021, Peng.
        Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.4.0.
      </p>
    </div>
  </body>
</html>