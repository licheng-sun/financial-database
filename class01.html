
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Class01 &#8212; Database and Data Management</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/nameko.css" />
    <link rel="stylesheet" type="text/css" href="_static/jupyter-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="_static/thebelab.css" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/thebelab-helper.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="https://unpkg.com/@jupyter-widgets/html-manager@^0.20.0/dist/embed-amd.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Class02" href="class02.html" />
    <link rel="prev" title="Database and Data Management" href="index.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="class02.html" title="Class02"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Database and Data Management"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Database and Data Management</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Class01</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="class01">
<h1>Class01<a class="headerlink" href="#class01" title="Permalink to this headline">¶</a></h1>
<section id="introduction-to-wrds">
<h2>Introduction to WRDS<a class="headerlink" href="#introduction-to-wrds" title="Permalink to this headline">¶</a></h2>
<section id="history">
<h3>History<a class="headerlink" href="#history" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Constructed by Wharton in <strong>1993</strong></p></li>
<li><p>Written by SAS</p></li>
<li><p>To facilitate data collection and data analysis for finance research</p></li>
</ul>
</section>
<section id="development">
<h3>Development<a class="headerlink" href="#development" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>WRDS cloud and Postgres connection are developed over past few years</p></li>
<li><p>More than <strong>350TB</strong> data</p></li>
<li><p>Over <strong>500</strong> subscribers</p></li>
</ul>
</section>
<section id="wrds-access">
<h3>WRDS access<a class="headerlink" href="#wrds-access" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p>Register WRDS account</p>
<p>1. Go to <a class="weblink" href="https://wrds-www.wharton.upenn.edu/" target="_blank">WRDS</a><br>
2. Click <strong>REGISTER</strong> on top right<br>
3. Fill registration form and then submit</p>
</li>
<li><p>Access methods</p>
<ul class="simple">
<li><p>Web interface</p></li>
<li><p>WRDS cloud (SSH)</p></li>
<li><p>Computer language/software (Python, R, SAS, Stata)</p></li>
</ul>
</li>
</ul>
</section>
</section>
<section id="introduction-to-python">
<h2>Introduction to Python<a class="headerlink" href="#introduction-to-python" title="Permalink to this headline">¶</a></h2>
<section id="install-anaconda">
<h3>Install Anaconda<a class="headerlink" href="#install-anaconda" title="Permalink to this headline">¶</a></h3>
<p>1. Go to <a class="weblink" href="https://www.anaconda.com/products/individual" target="_blank">Anaconda</a></p>
<p>2. Scroll down to find the installation files</p>
<p><img alt="" src="https://raw.githubusercontent.com/mk0417/image-lib/master/anaconda.png" /></p>
<p>Choose the operating system (Linux/MacOS/Windows) and make sure to download the <strong>64-bit Graphical Installer</strong></p>
<p>3. Double click the installation file and follow the wizard to complete the installation</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>Anaconda installation tutorial <a class="weblink" href="https://www.youtube.com/watch?v=_hsPV5ZZoJo" target="_blank">Youtube video from <b>Ties</b></a></p>
</div>
</section>
<section id="python-editors">
<h3>Python editors<a class="headerlink" href="#python-editors" title="Permalink to this headline">¶</a></h3>
<section id="jupyter-notebook">
<h4>Jupyter Notebook<a class="headerlink" href="#jupyter-notebook" title="Permalink to this headline">¶</a></h4>
<p>1. Open your terminal (MacOS) or start Anaconda prompt (Windows), then type in <code class="docutils literal notranslate"><span class="pre">jupyter</span> <span class="pre">lab</span></code>. This will open notebook in your default web browser.</p>
<p><img alt="" src="https://raw.githubusercontent.com/mk0417/image-lib/master/jupyter1.png" /></p>
<p>2. Click <strong>Python3</strong></p>
<p><img alt="" src="https://raw.githubusercontent.com/mk0417/image-lib/master/jupyter2.png" /></p>
<p>3. Type in <code class="docutils literal notranslate"><span class="pre">print('This</span> <span class="pre">is</span> <span class="pre">Python')</span></code> in the first cell and press <kbd>shift</kbd> + <kbd>enter</kbd> (this is the keyboard shortcut to run the code in that cell). The string will be printed out below. In the second cell, let’s write mutiple lines code and run it. In the example below, 2 will be printed.</p>
<p><img alt="" src="https://raw.githubusercontent.com/mk0417/image-lib/master/jupyter3.png" /></p>
</section>
<section id="vscode">
<h4>VSCode<a class="headerlink" href="#vscode" title="Permalink to this headline">¶</a></h4>
<p>There are many other ways to execute Python code. VSCode is a very popular one.</p>
<p>1. Visit <a class="weblink" href="https://code.visualstudio.com/" target="_blank">VSCode</a> to download installation file and install it.</p>
<p><img alt="" src="https://raw.githubusercontent.com/mk0417/image-lib/master/vscode1.png" /></p>
<p>2. Start VSCode and click the icon on the left bar as indicated below</p>
<p><img alt="" src="https://raw.githubusercontent.com/mk0417/image-lib/master/vscode2.png" /></p>
<p>3. You will find Python extension and click <strong>install</strong>.</p>
<p><img alt="" src="https://raw.githubusercontent.com/mk0417/image-lib/master/vscode3.png" /></p>
<p>4. Please type in <code class="docutils literal notranslate"><span class="pre">python</span></code> in the search bar if you cannot see the extension.</p>
<p><img alt="" src="https://raw.githubusercontent.com/mk0417/image-lib/master/vscode4.png" /></p>
<p>5. <kbd>cmd</kbd>+<kbd>n</kbd> (MacOS) or <kbd>alt</kbd>+<kbd>n</kbd> (Windows) to create a new file, type in <code class="docutils literal notranslate"><span class="pre">print('This</span> <span class="pre">is</span> <span class="pre">Python')</span></code> and save the file with the extension of <strong>.py</strong>.</p>
<p><img alt="" src="https://raw.githubusercontent.com/mk0417/image-lib/master/vscode5.png" /></p>
<p>6. Check if you have the Anaconda version of Python at left bottom corner. Just click it if you are not sure the Python version. Choose the Python version with anaconda path.</p>
<p><img alt="" src="https://raw.githubusercontent.com/mk0417/image-lib/master/vscode6.png" /></p>
<p>7. <kbd>cmd</kbd>+<kbd>shift</kbd>+<kbd>p</kbd> (MacOS) or <kbd>ctrl</kbd>+<kbd>shift</kbd>+<kbd>p</kbd> to open command palette. Type in <code class="docutils literal notranslate"><span class="pre">setting</span></code> and click <strong>Preferences: Open Setting (UI)</strong>.</p>
<p><img alt="" src="https://raw.githubusercontent.com/mk0417/image-lib/master/vscode7.png" /></p>
<p>8. Type in <code class="docutils literal notranslate"><span class="pre">send</span> <span class="pre">selection</span></code> in the search on top and make sure <strong>Jupyter: Send Selection to Interactive Window</strong> is ticked.</p>
<p><img alt="" src="https://raw.githubusercontent.com/mk0417/image-lib/master/vscode8.png" /></p>
<p>9. Move your cursor anythere in the fisrt line and press <kbd>shift</kbd>+<kbd>enter</kbd>, then an interactive window will be pop up on the right and the result will be printed there. For multiple line code, just select all the codes first and then press <kbd>shift</kbd>+<kbd>enter</kbd> to run the selection. You will see the results on the right.</p>
<p><img alt="" src="https://raw.githubusercontent.com/mk0417/image-lib/master/vscode9.png" /></p>
</section>
<section id="other-editors">
<h4>Other editors<a class="headerlink" href="#other-editors" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p><strong>Spyder</strong>. This is included in Anaconda distribution (<a class="weblink" href="https://www.youtube.com/watch?v=E2Dap5SfXkIYoutube" target="_blank">video tutorial</a>)</p></li>
<li><p><strong>Vim</strong> (an article <a class="weblink" href="https://www.fullstackpython.com/vim.html" target="_blank">how to build a Python IDE in <strong>Vim</strong></a>)</p></li>
<li><p><strong>Emacs</strong> (an article <a class="weblink" href="https://realpython.com/emacs-the-best-python-editor/" target="_blank">how to configure a Python environment in <strong>Emacs</strong></a>; <a class="weblink" href="https://github.com/hlissner/doom-emacs" target="_blank"><strong>Doom Emacs</strong> is an out-of-box configuration</a>)</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>There is a learning curve to use <strong>Emacs</strong> and <strong>Vim</strong> if you have no previous experience. Therefore, have a try only if you are interested in <strong>Emacs</strong> and <strong>Vim</strong>. Both of them have unique features to make your empirical research more productive. You can also see my <strong>Emacs</strong> configuration (<a class="weblink" href="https://github.com/mk0417/.emacs.d" target="_blank">.emacs.d</a>).</p>
<p>I use <strong>Emacs</strong> to do all my empirical research.</p>
</div>
</section>
</section>
<section id="retrieve-wrds-data">
<h3>Retrieve WRDS data<a class="headerlink" href="#retrieve-wrds-data" title="Permalink to this headline">¶</a></h3>
<p>WRDS provides Python package <strong>wrds</strong> to make our life much easier to download data from WRDS (the package is kind of wrapper of postgres connction to WRDS).</p>
<ul class="simple">
<li><p>Import required packages</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">wrds</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Connect to WRDS</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">conn</span> <span class="o">=</span> <span class="n">wrds</span><span class="o">.</span><span class="n">Connection</span><span class="p">()</span>
</pre></div>
</div>
<p>After you run it, type in your WRDS username and press <kbd>enter</kbd>; type in your WRDS password and press <kbd>enter</kbd></p>
<ul class="simple">
<li><p>List databases</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">lib</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">list_libraries</span><span class="p">()</span>
<span class="c1"># view first 3 databases</span>
<span class="n">lib</span><span class="p">[:</span><span class="mi">3</span><span class="p">]</span>
</pre></div>
</div>
<ul class="simple">
<li><p>List tables</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># get tables from CRSP database</span>
<span class="n">table</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">list_tables</span><span class="p">(</span><span class="s1">&#39;crsp&#39;</span><span class="p">)</span>
<span class="c1"># view first 3 tables</span>
<span class="n">table</span><span class="p">[:</span><span class="mi">3</span><span class="p">]</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Describe tables</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># list variables in monthly stock file (msf) from CRSP</span>
<span class="n">conn</span><span class="o">.</span><span class="n">describe_table</span><span class="p">(</span><span class="s1">&#39;crsp&#39;</span><span class="p">,</span> <span class="s1">&#39;msf&#39;</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Extract data</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">msf</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">raw_sql</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    select permno, date, ret</span>
<span class="s2">    from crsp.msf</span>
<span class="s2">    where date&gt;=&#39;01/01/2020&#39; and date&lt;=&#39;05/31/2020&#39;</span>
<span class="s2">&quot;&quot;&quot;</span><span class="p">)</span>

<span class="c1"># list first 5 observations</span>
<span class="n">msf</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
<dl class="defsection">
<lh class="deftitle">SQL syntax</lh>
<dt><cmd>select</cmd><dd>claim which variables you want to download and seprate them by comma (,)
<dt><cmd>from</cmd><dd>declare which table the variables are from
<dt><cmd>where</cmd><dd>conditional statement (like a filter)
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>Learn more SQL from <a class="weblink" href="https://www.postgresqltutorial.com/" target="_blank">PostgreSQL tutorial</a></p>
</div>
</section>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">Class01</a><ul>
<li><a class="reference internal" href="#introduction-to-wrds">Introduction to WRDS</a><ul>
<li><a class="reference internal" href="#history">History</a></li>
<li><a class="reference internal" href="#development">Development</a></li>
<li><a class="reference internal" href="#wrds-access">WRDS access</a></li>
</ul>
</li>
<li><a class="reference internal" href="#introduction-to-python">Introduction to Python</a><ul>
<li><a class="reference internal" href="#install-anaconda">Install Anaconda</a></li>
<li><a class="reference internal" href="#python-editors">Python editors</a><ul>
<li><a class="reference internal" href="#jupyter-notebook">Jupyter Notebook</a></li>
<li><a class="reference internal" href="#vscode">VSCode</a></li>
<li><a class="reference internal" href="#other-editors">Other editors</a></li>
</ul>
</li>
<li><a class="reference internal" href="#retrieve-wrds-data">Retrieve WRDS data</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  </div><h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation index</a><ul>
      <li>Previous: <a href="index.html" title="previous chapter">Database and Data Management</a></li>
      <li>Next: <a href="class02.html" title="next chapter">Class02</a></li>
  </ul></li>
</ul>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/class01.md.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="class02.html" title="Class02"
             >next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Database and Data Management"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Database and Data Management</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Class01</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
      <p>
        &copy; Copyright 2021, Peng.
        Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.4.0.
      </p>
    </div>
  </body>
</html>